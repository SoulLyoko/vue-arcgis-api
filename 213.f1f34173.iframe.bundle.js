(window.webpackJsonp=window.webpackJsonp||[]).push([[213],{"./node_modules/@arcgis/core/views/3d/layers/AnalysisLayerView3D.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"default",(function(){return d}));var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),_core_Collection_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/Collection.js"),_core_Error_js__WEBPACK_IMPORTED_MODULE_3__=(__webpack_require__("./node_modules/@arcgis/core/core/has.js"),__webpack_require__("./node_modules/@arcgis/core/core/Error.js")),_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/core/maybe.js"),_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/core/promiseUtils.js"),_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js"),_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js"),_LayerView3D_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@arcgis/core/views/3d/layers/LayerView3D.js"),_layers_LayerView_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@arcgis/core/views/layers/LayerView.js");const m="analysis-view-handles";let w=class extends(Object(_LayerView3D_js__WEBPACK_IMPORTED_MODULE_8__.a)(_layers_LayerView_js__WEBPACK_IMPORTED_MODULE_9__.a)){constructor(e){super(e),this.type="analysis-3d",this.allAnalysisViews=new _core_Collection_js__WEBPACK_IMPORTED_MODULE_1__.a,this._creatingViewCount=0,this._analysisViewCreationTasks=new Map,this._analysisModules={"area-measurement":{module:null},"direct-line-measurement":{module:null},"line-of-sight":{module:null},slice:{module:null}}}initialize(){for(const e of this.layer.analyses)this._createAnalysisView(e);this.handles.add([this.layer.analyses.on("after-add",(e=>{this._createAnalysisView(e.item)})),this.layer.analyses.on("after-remove",(e=>{const s=this.allAnalysisViews.removeAt(this.allAnalysisViews.findIndex((s=>s.analysis===e.item)));Object(_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__.l)(s)&&s.destroy();const i=this._analysisViewCreationTasks.get(e.item);Object(_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__.l)(i)&&(i.abort(),this._analysisViewCreationTasks.delete(e.item))}))],m)}destroy(){this.handles.remove(m),this.allAnalysisViews.drain((e=>e.destroy())),this._analysisViewCreationTasks.clear(),this._creatingViewCount=0}whenAnalysisView(e){const s=this._analysisViewCreationTasks.get(e);if(Object(_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__.l)(s))return s.promise;const t=new _core_Error_js__WEBPACK_IMPORTED_MODULE_3__.a("layerview:no-analysisview-for-analysis","The analysis has not been added to the AnalysisLayer of this layer view",{analysis:e});return Promise.reject(t)}isUpdating(){return 0!==this._creatingViewCount||this.allAnalysisViews.some((e=>e.updating))}_createAnalysisView(e){this._analysisViewCreationTasks.set(e,Object(_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_5__.h)((s=>this._createAnalysisViewPromise(e,s))))}async _createAnalysisViewPromise(e,s){this._creatingViewCount+=1;const a=e.type,r=this._analysisModules[a];if(Object(_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__.k)(r.module)){const e=await this._loadAnalysisModule(a);r.module=e}const o=new r.module.default({analysis:e,view:this.view,parent:this});if(await o.when(),this._creatingViewCount-=1,Object(_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_5__.n)(s))throw o.destroy(),new _core_Error_js__WEBPACK_IMPORTED_MODULE_3__.a("layerview:no-analysisview-for-analysis","The analysis has not been added to the AnalysisLayer of this layer view",{analysis:e});return this.allAnalysisViews.add(o),o}_loadAnalysisModule(e){switch(e){case"area-measurement":return Promise.all([__webpack_require__.e(7),__webpack_require__.e(9),__webpack_require__.e(36)]).then(__webpack_require__.bind(null,"./node_modules/@arcgis/core/views/3d/analysis/AreaMeasurement/AreaMeasurementView3D.js"));case"direct-line-measurement":return Promise.all([__webpack_require__.e(7),__webpack_require__.e(9),__webpack_require__.e(37)]).then(__webpack_require__.bind(null,"./node_modules/@arcgis/core/views/3d/analysis/DirectLineMeasurement/DirectLineMeasurementView3D.js"));case"line-of-sight":return __webpack_require__.e(32).then(__webpack_require__.bind(null,"./node_modules/@arcgis/core/views/3d/analysis/LineOfSight/LineOfSightView3D.js"));case"slice":return __webpack_require__.e(25).then(__webpack_require__.bind(null,"./node_modules/@arcgis/core/views/3d/analysis/Slice/SliceView3D.js"));default:return null}}};Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__.a)([Object(_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__.b)()],w.prototype,"type",void 0),Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__.a)([Object(_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__.b)()],w.prototype,"layer",void 0),Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__.a)([Object(_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__.b)()],w.prototype,"allAnalysisViews",void 0),Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__.a)([Object(_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__.b)()],w.prototype,"_creatingViewCount",void 0),w=Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__.a)([Object(_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__.a)("esri.views.3d.layers.AnalysisLayerView3D")],w);const d=w}}]);